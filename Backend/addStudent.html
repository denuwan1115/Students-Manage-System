<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add New Student</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Afacad+Flux:wght@100..1000&family=Faculty+Glyphic&family=Lexend+Deca:wght@100..900&display=swap"
        rel="stylesheet">
    <link rel="shortcut icon" href="images/Logo.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/contact.css" rel="stylesheet">

    <style>
        body {
            background-color: #2b4a36;
            color: #E6E3B3;
            font-family: "Faculty Glyphic", serif;
            background:#243d2c url('images/herobg22.jpg');
            background-blend-mode:lighten;
            background-blend-mode: color-burn;
            background-size:cover;
        }
        .footersvg svg {
            margin-top: -350px;
            margin-bottom: -40px;
        }
        .footersvg p {
            font-size: 0.9rem;
            margin-top: -90px;
            position: relative;
        }
        .footersvg {
            margin-top: 300px;
            margin-bottom: -470px;        
        }
        .container{
            position: relative;
            margin-top: -250px;
        }
        .topsvg{
            margin-bottom: -48px;                   
        }
        .btn{
            margin-left: 45%;
            margin-top: 20px;
            align-items: center;
            background-color: #7ceda1;
            color: #0b2111;
        }
    </style>
</head>

<body>
    <div class="topsvg">
        <svg viewBox="0 0 1265 144" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path fill="#E6E3B3" d="M 0 40 C 164 40 164 20 328 20 L 328 20 L 328 0 L 0 0 Z" stroke-width="0">
            </path>
            <path fill="#E6E3B3" d="M 327 20 C 445.5 20 445.5 89 564 89 L 564 89 L 564 0 L 327 0 Z" stroke-width="0"></path>
            <path fill="#E6E3B3" d="M 563 89 C 724.5 89 724.5 48 886 48 L 886 48 L 886 0 L 563 0 Z" stroke-width="0"></path>
            <path fill="#E6E3B3" d="M 885 48 C 1006.5 48 1006.5 67 1128 67 L 1128 67 L 1128 0 L 885 0 Z" stroke-width="0">
            </path>
            <path fill="#E6E3B3" d="M 1127 67 C 1196 67 1196 0 1265 0 L 1265 0 L 1265 0 L 1127 0 Z" stroke-width="0"></path>
        </svg>
    </div>    
    
    <div class="container mt-5">
        <h2 class="text-center">Add New Student</h2>
        <form id="addStudentForm">
            <div class="form-group">
                <label for="sid">SID</label>
                <input type="text" class="form-control" id="sid" required>
            </div>
            <div class="form-group">
                <label for="firstName">First Name</label>
                <input type="text" class="form-control" id="firstName" required>
            </div>
            <div class="form-group">
                <label for="lastName">Last Name</label>
                <input type="text" class="form-control" id="lastName" required>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" class="form-control" id="email" required>
            </div>
            <div class="form-group">
                <label for="nearCity">Near City</label>
                <input type="text" class="form-control" id="nearCity" required>
            </div>
            <div class="form-group">
                <label for="course">Course</label>
                <input type="text" class="form-control" id="course" placeholder="Enter courses separated by commas (e.g., Foundation, HND, Degree)" required>
            </div>
            <div class="form-group">
                <label for="guardian">Guardian</label>
                <input type="text" class="form-control" id="guardian" required>
            </div>
            <div class="form-group">
                <label for="subjects">Subjects</label>
                <input type="text" class="form-control" id="subjects" placeholder="Enter subjects separated by commas" required>
            </div>
            <button type="submit" class="btn btn-primary">Add Student</button>
        </form>
    </div>


    <div class="footersvg">
        <footer class="mt-5">
            <div class="container text-center">
                <p>Â© 2024 EduLog.ETF-G21.</p>
            </div>
        </footer>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
            <path fill="#183020" fill-opacity="1"
                d="M0,224L34.3,192C68.6,160,137,96,206,90.7C274.3,85,343,139,411,144C480,149,549,107,617,122.7C685.7,139,754,213,823,240C891.4,267,960,245,1029,224C1097.1,203,1166,181,1234,160C1302.9,139,1371,117,1406,106.7L1440,96L1440,320L1405.7,320C1371.4,320,1303,320,1234,320C1165.7,320,1097,320,1029,320C960,320,891,320,823,320C754.3,320,686,320,617,320C548.6,320,480,320,411,320C342.9,320,274,320,206,320C137.1,320,69,320,34,320L0,320Z">
            </path>
        </svg>
    </div>


    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#addStudentForm').on('submit', function (e) {
                e.preventDefault();

                let studentData = {
                    sid: $('#sid').val(),
                    firstName: $('#firstName').val(),
                    lastName: $('#lastName').val(),
                    email: $('#email').val(),
                    nearCity: $('#nearCity').val(),
                    course: $('#course').val().split(',').map(c => c.trim()),
                    guardian: $('#guardian').val(),
                    subjects: $('#subjects').val().split(',').map(s => s.trim())
                };

                $.ajax({
                    url: 'php/addStudent.php',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(studentData),
                    success: function (response) {
                        alert(response.message);
                        if (response.message === "Student added successfully") {
                            $('#addStudentForm')[0].reset();
                        }
                    },
                    error: function (xhr, status, error) {
                        alert("An error occurred: " + error);
                    }
                });
            });
        });
    </script>
</body>

</html>